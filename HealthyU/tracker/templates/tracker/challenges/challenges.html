{% extends "tracker/base.html" %}
{% load static %}

{% block extra_css %}
    <link rel="stylesheet" href="{% static 'tracker/css/pages/challenges/challenges.css' %}">
{% endblock %}

{% block content %}

  <div class="container ch-wrap">
    <h2 class="mb-3">Today's Challenge</h2>
    <p class="text-muted mb-4">{{ today_date }}</p>

    {% if not challenge %}
      <div class="alert alert-warning">
        No challenge found. Please add 10 challenges in admin.
      </div>
    {% else %}
      <div class="ch-card">

        <div class="ch-title">{{ challenge.title }}</div>
        <div class="ch-desc">
          {{ challenge.description|default:"Complete this daily challenge step-by-step." }}
        </div>

        <div class="mb-3">
          <span class="badge-pill badge-blue">
            â­ +{{ challenge.points }} Points
          </span>

          {% if challenge.completed %}
            <span class="badge-pill badge-green">âœ… Completed</span>
          {% elif is_guest %}
            <span class="badge-pill badge-gray">ğŸ‘€ View Only</span>
          {% else %}
            <span class="badge-pill badge-blue">ğŸ”¥ Available</span>
          {% endif %}
        </div>

        <a href="{% url 'challenge_session' challenge.id %}" class="btn btn-primary">
          Accept Challenge â†’
        </a>

      </div>
    {% endif %}
  </div>

{% endblock %}

{% block extra_js %}
    <script src="{% static 'tracker/js/pages/challenges/challenges.js' %}"></script>
{% endblock %}
